<section class="page-hero mb-4 reveal">
    <div class="row g-3 align-items-center">
        <div class="col-lg-9">
            <h1 class="display-6 mb-2">Parcours d'apprentissage</h1>
            <p class="mb-0">Vue d'ensemble du cursus. Chaque module possede maintenant sa page de cours dediee.</p>
        </div>
        <div class="col-lg-3 text-lg-end">
            <p class="page-tag mb-2">Cursus guide</p>
            <a href="entrainement.html" class="btn btn-light btn-sm">Aller a l'entrainement</a>
        </div>
    </div>
</section>

<div class="row g-4 reveal reveal-delay-1">
    <aside class="col-lg-3">
        <div class="soft-panel p-3 sticky-top" style="top: 90px;">
            <h2 class="h6 section-title section-head"><span class="icon-badge">ET</span>Etapes</h2>
            <div class="list-group">
                {{#etapes}}
                <button type="button" class="list-group-item list-group-item-action" onclick="scrollToEtape('etape-{{id}}')">
                    <strong>{{name}}</strong><br>
                    <small class="text-muted">{{moduleCount}} modules</small>
                </button>
                {{/etapes}}
            </div>
        </div>
    </aside>

    <section class="col-lg-9">
        {{#etapes}}
        <section id="etape-{{id}}" class="mb-5 reveal reveal-delay-2">
            <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                    <h2 class="section-title h4 mb-1 section-head"><span class="icon-badge">M</span>{{name}}</h2>
                    <p class="text-muted mb-0">{{description}}</p>
                </div>
                <span class="badge text-bg-light">{{moduleCount}} modules</span>
            </div>

            <div class="row g-4">
                {{#modules}}
                <div class="col-xl-6">
                    <article class="card h-100" id="module-{{id}}">
                        <header class="card-header bg-light-subtle">
                            <h3 class="h5 mb-0">Module {{moduleNumber}} - {{name}}</h3>
                        </header>
                        <div class="card-body d-flex flex-column">
                            <p class="text-muted mb-3">{{synopsis}}</p>

                            <h4 class="h6 mb-2">A retenir en priorite</h4>
                            <ul class="small mb-3">
                                {{#quickKeyPoints}}
                                <li>{{.}}</li>
                                {{/quickKeyPoints}}
                            </ul>

                            <div class="d-flex flex-wrap gap-2 mb-3">
                                <span class="badge text-bg-light">QCM module: {{qcmQuestionCount}}</span>
                                <span class="badge text-bg-light">Annales {{annalesDomainLabel}}: {{annalesCount}}</span>
                            </div>

                            <div class="mt-auto d-grid gap-2 d-md-flex">
                                <a href="{{coursePage}}" class="btn btn-primary btn-sm">Ouvrir le cours</a>
                                <a href="session.html?mode=quick&module={{id}}" class="btn btn-outline-primary btn-sm">QCM module</a>
                            </div>
                        </div>
                    </article>
                </div>
                {{/modules}}
            </div>
        </section>
        {{/etapes}}
    </section>
</div>

<script>
function scrollToEtape(id) {
    const target = document.getElementById(id);
    if (target) target.scrollIntoView({ behavior: 'smooth' });
}
</script>
