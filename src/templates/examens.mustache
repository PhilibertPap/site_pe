<section class="page-hero mb-4 reveal">
    <div class="row g-3 align-items-center">
        <div class="col-lg-9">
            <h1 class="display-6 mb-2">Pont d'examen</h1>
            <p class="mb-0">Simule les conditions réelles : QCM chronométré, erreurs limitées, navigation complète.</p>
        </div>
        <div class="col-lg-3 text-lg-end">
            <p class="page-tag mb-2">Simulation</p>
            <span class="badge text-bg-light">30 questions / 30 minutes</span>
        </div>
    </div>
</section>

<div class="alert alert-info reveal reveal-delay-1">
    <strong>Format réel :</strong> 30 questions QCM + 1 problème de navigation/marée.
</div>

<div class="row g-4 reveal reveal-delay-1">
    <section class="col-lg-8 reveal reveal-delay-2">
        <article class="card mb-4 reveal reveal-delay-2">
            <header class="card-header bg-primary text-white">
                <h2 class="h5 mb-0 section-head"><span class="icon-badge">EX</span>Examen blanc complet</h2>
            </header>
            <div class="card-body">
                <p><strong>Durée totale :</strong> environ 1h30.</p>
                <ul class="mb-4">
                    <li>Partie 1 : QCM 30 questions (5 fautes admises)</li>
                    <li>Partie 2 : problème navigation + marée</li>
                </ul>
                <button class="btn btn-primary btn-lg" id="start-full-exam-btn">Démarrer l'examen complet</button>
            </div>
        </article>

        <article class="card mb-4 reveal reveal-delay-3">
            <header class="card-header bg-success text-white">
                <h2 class="h5 mb-0 section-head"><span class="icon-badge">Q</span>QCM module en mode examen</h2>
            </header>
            <div class="card-body">
                <p>Noté uniquement à la fin, comme un vrai examen.</p>
                <div class="row g-2 align-items-end">
                    <div class="col-md-8">
                        <label class="form-label" for="qcm-filter">Filtre par module</label>
                        <select class="form-select" id="qcm-filter">
                            <option value="">Choisir un module</option>
                            {{#modules}}
                            <option value="{{id}}">{{name}}</option>
                            {{/modules}}
                        </select>
                    </div>
                    <div class="col-md-4 d-grid">
                        <button class="btn btn-success" id="start-module-exam-btn">Démarrer</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="card mb-4 reveal reveal-delay-3">
            <header class="card-header bg-secondary text-white">
                <h2 class="h5 mb-0 section-head"><span class="icon-badge">SF</span>Séries fixes d'examen</h2>
            </header>
            <div class="card-body">
                <p class="text-muted">Lance une série prédéfinie de 30 questions.</p>
                <div id="fixed-series-list" class="row g-2"></div>
            </div>
        </article>

        <article class="card reveal reveal-delay-4">
            <header class="card-header bg-info text-white">
                <h2 class="h5 mb-0 section-head"><span class="icon-badge">NV</span>Problème de navigation</h2>
            </header>
            <div class="card-body">
                <p>Travaille un cas complet : cartographie, marée, route et sécurité.</p>
                <p class="text-muted"><small>La carte 9999 est utile pour suivre toutes les étapes.</small></p>
                <button class="btn btn-info" id="start-navigation-problem-btn">Démarrer le problème</button>
                <a href="navigation.html" class="btn btn-outline-info ms-2">Voir le détail du problème</a>
            </div>
        </article>
    </section>

    <aside class="col-lg-4 reveal reveal-delay-3">
        <div class="card mb-4 reveal reveal-delay-3">
            <div class="card-header bg-light-subtle">
                <h2 class="h6 mb-0 section-head"><span class="icon-badge">ST</span>Tes statistiques</h2>
            </div>
            <div class="card-body">
                <p class="mb-3"><strong>Historique récent</strong></p>
                <div id="exam-history-list">
                    {{#examHistory}}
                    <div class="mb-3 pb-3 border-bottom">
                        <small class="text-muted">{{date}}</small><br>
                        <strong>Score : {{score}}/100</strong>
                        <div class="progress mt-2" role="progressbar">
                            <div class="progress-bar {{scoreColor}}" style="width: {{scorePercent}}%"></div>
                        </div>
                    </div>
                    {{/examHistory}}
                    {{^examHistory}}
                    <p class="text-muted mb-0">Aucun examen enregistré pour le moment.</p>
                    {{/examHistory}}
                </div>
                <hr>
                <div id="exam-kpis" class="small text-muted">
                    Les statistiques se mettent à jour après chaque session.
                </div>
            </div>
        </div>

        <div class="card reveal reveal-delay-4">
            <div class="card-header bg-light-subtle">
                <h2 class="h6 mb-0 section-head"><span class="icon-badge">CL</span>Points clés</h2>
            </div>
            <div class="card-body">
                <ul class="list-unstyled mb-0">
                    <li class="mb-2"><strong>5 fautes max</strong> au QCM</li>
                    <li class="mb-2"><strong>30 minutes</strong> de temps imparti</li>
                    <li class="mb-2"><strong>50%</strong> minimum en régulation</li>
                    <li><strong>Marées</strong> à contrôler systématiquement</li>
                </ul>
            </div>
        </div>

        <div class="card mt-4 reveal reveal-delay-4">
            <div class="card-header bg-light-subtle">
                <h2 class="h6 mb-0 section-head"><span class="icon-badge">AN</span>Annales QCM</h2>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    {{#annalesQcmSessions}}
                    <li class="list-group-item px-0">
                        <strong>{{label}}</strong>
                        {{#hasCorrige}}<span class="badge text-bg-success ms-1">corrigé</span>{{/hasCorrige}}
                        {{#answerKeyAvailable}}<span class="badge text-bg-info ms-1">clé docx</span>{{/answerKeyAvailable}}
                        <div class="mt-2 d-flex flex-wrap gap-2">
                            {{#downloads}}
                            <a class="btn btn-outline-secondary btn-sm" href="{{path}}" download>{{label}} ({{extension}})</a>
                            {{/downloads}}
                        </div>
                    </li>
                    {{/annalesQcmSessions}}
                </ul>
            </div>
        </div>
    </aside>
</div>
<script src="js/examens.js"></script>
