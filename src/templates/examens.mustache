<section class="page-hero mb-4">
    <div class="row g-3 align-items-center">
        <div class="col-lg-9">
            <h1 class="display-6 mb-2">Pont d'examen</h1>
            <p class="mb-0">Simule les conditions réelles : QCM chronométré, erreurs limitées, navigation complète.</p>
        </div>
        <div class="col-lg-3 text-lg-end">
            <span class="badge text-bg-light">30 questions / 30 minutes</span>
        </div>
    </div>
</section>

<div class="alert alert-info">
    <strong>Format réel :</strong> 30 questions QCM + 1 problème de navigation/marée.
</div>

<div class="row g-4">
    <section class="col-lg-8">
        <article class="card mb-4">
            <header class="card-header bg-primary text-white">
                <h2 class="h5 mb-0">Examen blanc complet</h2>
            </header>
            <div class="card-body">
                <p><strong>Durée totale :</strong> environ 1h30.</p>
                <ul class="mb-4">
                    <li>Partie 1 : QCM 30 questions (5 fautes admises)</li>
                    <li>Partie 2 : problème navigation + marée</li>
                </ul>
                <button class="btn btn-primary btn-lg" onclick="startFullExam()">Démarrer l'examen complet</button>
            </div>
        </article>

        <article class="card mb-4">
            <header class="card-header bg-success text-white">
                <h2 class="h5 mb-0">QCM rapide</h2>
            </header>
            <div class="card-body">
                <p>Révise rapidement sur <strong>{{qcmQuestionCount}}</strong> questions.</p>
                <div class="row g-2 align-items-end">
                    <div class="col-md-8">
                        <label class="form-label" for="qcm-filter">Filtre par module</label>
                        <select class="form-select" id="qcm-filter">
                            <option value="">Tous les modules</option>
                            {{#modules}}
                            <option value="{{id}}">{{name}}</option>
                            {{/modules}}
                        </select>
                    </div>
                    <div class="col-md-4 d-grid">
                        <button class="btn btn-success" onclick="startQuickQCM()">Démarrer</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="card">
            <header class="card-header bg-info text-white">
                <h2 class="h5 mb-0">Problème de navigation</h2>
            </header>
            <div class="card-body">
                <p>Travaille un cas complet : cartographie, marée, route et sécurité.</p>
                <p class="text-muted"><small>La carte 9999 est utile pour suivre toutes les étapes.</small></p>
                <button class="btn btn-info" onclick="startNavigationProblem()">Démarrer le problème</button>
                <a href="#" class="btn btn-outline-info ms-2">Télécharger la carte 9999</a>
            </div>
        </article>
    </section>

    <aside class="col-lg-4">
        <div class="card mb-4">
            <div class="card-header bg-light-subtle">
                <h2 class="h6 mb-0">Tes statistiques</h2>
            </div>
            <div class="card-body">
                <p class="mb-3"><strong>Historique récent</strong></p>
                {{#examHistory}}
                <div class="mb-3 pb-3 border-bottom">
                    <small class="text-muted">{{date}}</small><br>
                    <strong>Score : {{score}}/100</strong>
                    <div class="progress mt-2" role="progressbar">
                        <div class="progress-bar {{scoreColor}}" style="width: {{scorePercent}}%"></div>
                    </div>
                </div>
                {{/examHistory}}
                {{^examHistory}}
                <p class="text-muted mb-0">Aucun examen enregistré pour le moment.</p>
                {{/examHistory}}
            </div>
        </div>

        <div class="card">
            <div class="card-header bg-light-subtle">
                <h2 class="h6 mb-0">Points clés</h2>
            </div>
            <div class="card-body">
                <ul class="list-unstyled mb-0">
                    <li class="mb-2"><strong>5 fautes max</strong> au QCM</li>
                    <li class="mb-2"><strong>30 minutes</strong> de temps imparti</li>
                    <li class="mb-2"><strong>50%</strong> minimum en régulation</li>
                    <li><strong>Marées</strong> à contrôler systématiquement</li>
                </ul>
            </div>
        </div>
    </aside>
</div>

<div id="exam-container" class="mt-5 soft-panel p-3" style="display:none;"></div>

<script>
function startFullExam() {
    document.getElementById('exam-container').style.display = 'block';
    // Logique examen chargée par JS/app.js
    console.log('Démarrage examen complet');
}

function startQuickQCM() {
    const filter = document.getElementById('qcm-filter').value;
    document.getElementById('exam-container').style.display = 'block';
    // Logique QCM chargée par JS
    console.log('Démarrage QCM rapide:', filter);
}

function startNavigationProblem() {
    document.getElementById('exam-container').style.display = 'block';
    // Logique problème navigation chargée par JS
    console.log('Démarrage problème navigation');
}
</script>
